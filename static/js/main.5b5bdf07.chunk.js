(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){},32:function(e,t,n){e.exports=n(45)},37:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a,s=n(0),o=n.n(s),r=n(16),c=n.n(r),i=(n(25),n(37),n(3)),m=n(4),l=n(8),u=n(7),E=n(9),d=function(){return o.a.createElement("aside",{className:"main-sidebar"},o.a.createElement("h1",{className:"main-title"},"Diary app"),o.a.createElement("div",{className:"main-subtitle"},"Comment with no sense"))},S=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"layout"},o.a.createElement(d,null),o.a.createElement("main",{className:"content-container"},o.a.createElement("div",{className:"main-content"},this.props.children)))}}]),t}(s.Component),p=n(2),O=n(46),_=n(14);!function(e){e.GET_POSTS="@@posts/GET_POSTS",e.GET_POSTS_SUCCESS="@@posts/GET_POSTS_SUCCESS",e.GET_POSTS_FAILURE="@@posts/GET_POSTS_FAILURE",e.SAVE_POST="@@posts/SAVE_POST",e.SAVE_POST_SUCCESS="@@posts/SAVE_POST_SUCCESS",e.SAVE_POST_FAILURE="@@posts/SAVE_POST_FAILURE",e.DELETE_POST="@@posts/DELETE_POST",e.DELETE_POST_SUCCESS="@@posts/DELETE_POST_SUCCESS",e.DELETE_POST_FAILURE="@@posts/DELETE_POST_SUCCESS",e.CLEAR_POSTS="@@posts/CLEAR_POSTS"}(a||(a={}));var C,T=n(1);!function(e){e.comments="comments",e.posts="posts"}(C||(C={}));var f,b=[{id:1,description:"First item with custom name"},{id:2,description:"Second item is active"}],h=[{id:1,description:"Cum habena peregrinatione, omnes parses anhelare flavum, placidus brabeutaes.",post_id:2},{id:2,description:"Adgium persuaderes, tanquam raptus cacula. Demissios ire! Solitudo de pius valebat, experientia orexis!",post_id:2},{id:3,description:"Cobaltums mori in pius hafnia!",post_id:1}],v=function(e){var t=localStorage.getItem(e),n=[];return e===C.posts&&(n=b),e===C.comments&&(n=h),"string"===typeof t&&(n=JSON.parse(t)),n},g=function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,null,[{key:"getPosts",value:function(){return v(C.posts)}},{key:"addPost",value:function(e){var t=v(C.posts).concat(e);return localStorage.setItem(C.posts,JSON.stringify(t)),e}},{key:"removePost",value:function(e){var t=v(C.posts).filter(function(t){return t.id!==e});return localStorage.setItem(C.posts,JSON.stringify(t)),e}},{key:"getComments",value:function(e){return v(C.comments).filter(function(t){return t.post_id===e})}}]),e}(),P=n(17),y=n.n(P),j=function(e){return o.a.createElement("form",{className:"main-form main-form_post",onSubmit:e.submitHandler},o.a.createElement("input",{className:"primary-input",type:"text",placeholder:"Type name here...",onChange:e.changeHandler,value:e.value}),o.a.createElement("button",{className:"btn-ordinary"},o.a.createElement("span",{className:"btn-ordinary__text"},"Add new")))},M=n(29),N=n.n(M),A=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isChecked:!1},n.clickHandler=n.clickHandler.bind(Object(p.a)(n)),n.removeHandler=n.removeHandler.bind(Object(p.a)(n)),n}return Object(E.a)(t,e),Object(m.a)(t,[{key:"clickHandler",value:function(){this.props.chooseHandler(this.props.data.id)}},{key:"removeHandler",value:function(e){e.stopPropagation(),this.props.removeHandler(this.props.data.id)}},{key:"render",value:function(){var e=this.props.data,t=N()({post:!0,post_checked:this.props.isChecked});return o.a.createElement("div",{className:t,onClick:this.clickHandler},o.a.createElement("div",{className:"post__inner"},o.a.createElement("div",{className:"post__title-box"},o.a.createElement("h3",{className:"post__title title"},e.description),o.a.createElement("span",{className:"post__comment-count"},this.props.comments_count)),o.a.createElement("button",{className:"post__remove-btn btn-ordinary btn-ordinary_remove",onClick:this.removeHandler},"Delete")))}}]),t}(s.Component);A.defaultProps={isChecked:!1},function(e){e.GET_COMMENTS="@@comments/GET_COMMENTS",e.GET_COMMENTS_SUCCESS="@@comments/GET_COMMENTS_SUCCESS",e.GET_COMMENTS_FAILURE="@@comments/GET_COMMENTS_FAILURE",e.CLEAR_COMMENTS="@@comments/CLEAR_COMMENTS",e.SAVE_COMMENTS="@@comments/SAVE_COMMENTS",e.SAVE_COMMENTS_SUCCESS="@@comments/SAVE_COMMENTS_SUCCESS",e.SAVE_COMMENTS_FAILURE="@@comments/SAVE_COMMENTS_FAILURE"}(f||(f={}));var L,U=function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,null,[{key:"getComments",value:function(){return v(C.comments)}},{key:"addComment",value:function(e){var t=v(C.comments).concat(e);return localStorage.setItem(C.comments,JSON.stringify(t)),e}},{key:"removeComment",value:function(e){var t=v(C.comments).filter(function(t){return t.id!==e});return localStorage.setItem("comments",JSON.stringify(t)),e}}]),e}();!function(e){e.GET_POST_COMMENTS="@@posts/GET_POST_COMMENTS",e.GET_POST_COMMENTS_SUCCESS="@@posts/GET_POST_COMMENTS_SUCCESS",e.GET_POST_COMMENTS_FAILURE="@@posts/GET_POST_COMMENTS_FAILURE",e.CLEAR_POST_COMMENTS="@@posts/CLEAR_POST_COMMENTS"}(L||(L={}));var k=function(e){return function(t,n){t(Object(T.action)(L.GET_POST_COMMENTS));try{var a=g.getComments(e);t((s=a,Object(T.action)(L.GET_POST_COMMENTS_SUCCESS,{data:s})))}catch(o){t(function(e){return Object(T.action)(L.GET_POST_COMMENTS_FAILURE,{message:e})}("Error found. Please, try again."))}var s}},H=function(){return function(e,t){e(Object(T.action)(f.GET_COMMENTS));try{var n=U.getComments();e((a=n,Object(T.action)(f.GET_COMMENTS_SUCCESS,{data:a})))}catch(s){e(function(e){return Object(T.action)(f.GET_COMMENTS_FAILURE,{message:e})}("Error found. Please, try again."))}var a}},I=function(e){return function(t,n){t(Object(T.action)(f.SAVE_COMMENTS));try{var a=U.addComment(e);t((s=a,Object(T.action)(f.SAVE_COMMENTS_SUCCESS,{data:s}))),t(H()),t(k(e.post_id))}catch(o){t(function(e){return Object(T.action)(f.SAVE_COMMENTS_FAILURE,{message:e})}("Error found. Please, try again."))}var s}},G=function(e){return o.a.createElement("form",{className:"textarea-box"},o.a.createElement("div",{className:"square textarea-box__colored-square"}),o.a.createElement("textarea",{className:"textarea-box__textarea primary-textarea",value:e.value,onKeyUp:e.submitHandler,onChange:e.changeHandler}))},R=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.data;return o.a.createElement("div",{className:"comment"},o.a.createElement("div",{className:"square comment__colored-square"}),o.a.createElement("div",{className:"comment__description"},e.description))}}]),t}(s.Component),V=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={commentText:""},n.changeCommentHandler=n.changeCommentHandler.bind(Object(p.a)(n)),n.submitCommentFormHandler=n.submitCommentFormHandler.bind(Object(p.a)(n)),n.clearCommentValue=n.clearCommentValue.bind(Object(p.a)(n)),n}return Object(E.a)(t,e),Object(m.a)(t,[{key:"componentWillUnmount",value:function(){this.props.clearPostComments()}},{key:"changeCommentHandler",value:function(e){var t=e.target.value;this.setState(function(){return{commentText:t}})}},{key:"clearCommentValue",value:function(){this.setState(function(){return{commentText:""}})}},{key:"submitCommentFormHandler",value:function(e){e.preventDefault(),13===e.keyCode&&e.ctrlKey&&(this.props.addCommentEffect({id:y()(),description:this.state.commentText,post_id:this.props.postId}),this.clearCommentValue())}},{key:"render",value:function(){return o.a.createElement("div",{className:"comments"},o.a.createElement("h2",{className:"comments__title title title_1"},"Comments #",this.props.postId),!Object(O.a)(this.props.data)&&this.props.data&&this.getCommentsList(this.props.data),o.a.createElement(G,{changeHandler:this.changeCommentHandler,value:this.state.commentText,submitHandler:this.submitCommentFormHandler}))}},{key:"getCommentsList",value:function(e){return o.a.createElement("div",{className:"comments__content"},e.map(function(e){return o.a.createElement(R,{key:e.id,data:e})}))}}]),t}(s.Component),F={addCommentEffect:I,clearPostComments:function(){return Object(T.action)(L.CLEAR_POST_COMMENTS)}},x=Object(_.b)(null,F)(V),w=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isCommentsVisible:!1,postText:"",checkedPostId:0},n.getPostsList=n.getPostsList.bind(Object(p.a)(n)),n.showComments=n.showComments.bind(Object(p.a)(n)),n.choosePostHandler=n.choosePostHandler.bind(Object(p.a)(n)),n.changePostHandler=n.changePostHandler.bind(Object(p.a)(n)),n.submitPostFormHandler=n.submitPostFormHandler.bind(Object(p.a)(n)),n.removePostHandler=n.removePostHandler.bind(Object(p.a)(n)),n}return Object(E.a)(t,e),Object(m.a)(t,[{key:"showComments",value:function(){this.setState(function(e){return{isCommentsVisible:!e.isCommentsVisible}})}},{key:"componentDidMount",value:function(){this.props.getPostsEffect(),this.props.getCommentsEffect()}},{key:"componentWillUnmount",value:function(){this.setState(function(){return{isCommentsVisible:!1}})}},{key:"choosePostHandler",value:function(e){this.props.getPostCommentsEffect(e),this.setState(function(){return{isCommentsVisible:!0,checkedPostId:e}})}},{key:"changePostHandler",value:function(e){var t=e.target.value;this.setState(function(){return{postText:t}})}},{key:"submitPostFormHandler",value:function(e){e.preventDefault(),this.props.addPostEffect({id:y()(),description:this.state.postText}),this.setState(function(){return{postText:""}})}},{key:"removePostHandler",value:function(e){this.props.deletePostEffect(e),this.setState(function(){return{isCommentsVisible:!1}})}},{key:"render",value:function(){var e=this.props,t=e.posts,n=e.postComments;return console.log(n),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"posts"},o.a.createElement("h2",{className:"title title_1"},"Items"),o.a.createElement(j,{value:this.state.postText,submitHandler:this.submitPostFormHandler,changeHandler:this.changePostHandler}),t&&!Object(O.a)(t)&&this.getPostsList(t)),this.state.isCommentsVisible&&o.a.createElement(x,{data:n,postId:this.state.checkedPostId}))}},{key:"getPostsList",value:function(e){var t=this;return e.map(function(e){var n=t.props.comments.filter(function(t){return t.post_id===e.id});return o.a.createElement(A,{key:e.id,data:e,chooseHandler:t.choosePostHandler,isChecked:e.id===t.state.checkedPostId,comments_count:n.length,removeHandler:t.removePostHandler})})}}]),t}(s.Component),D={getPostsEffect:function(){return function(e,t){e(Object(T.action)(a.GET_POSTS));try{var n=g.getPosts();e((s=n,Object(T.action)(a.GET_POSTS_SUCCESS,{data:s})))}catch(o){e(function(e){return Object(T.action)(a.GET_POSTS_FAILURE,{message:e})}("Error found. Please, try again."))}var s}},getCommentsEffect:H,getPostCommentsEffect:k,addPostEffect:function(e){return function(t,n){t(Object(T.action)(a.SAVE_POST));try{var s=g.addPost(e);t((o=s,Object(T.action)(a.SAVE_POST_SUCCESS,{data:o})))}catch(r){t(function(e){return Object(T.action)(a.SAVE_POST_FAILURE,{message:e})}("Error found. Please, try again."))}var o}},addCommentEffect:I,deletePostEffect:function(e){return function(t,n){t(Object(T.action)(a.DELETE_POST));try{t(function(e){return Object(T.action)(a.DELETE_POST_SUCCESS,{id:e})}(g.removePost(e)))}catch(s){t(function(e){return Object(T.action)(a.DELETE_POST_FAILURE,{message:e})}("Error found. Please, try again."))}}}},J=Object(_.b)(function(e){var t=e.posts,n=e.comments;return{posts:t.allPosts.entity,comments:n.allComments.entity,postComments:t.postComments.entity}},D)(w),q=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(S,null,o.a.createElement(J,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=n(6),B=n(30),K=n(31),$=n(19),z=n(47),Q={pending:!1,entity:[],message:""},X=Object(W.combineReducers)({allComments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.GET_COMMENTS:return Object(z.a)(e,{pending:!0});case f.GET_COMMENTS_SUCCESS:return Object(z.a)(e,{pending:!1,entity:t.payload.data});case f.GET_COMMENTS_FAILURE:return Object(z.a)(e,{pending:!1,message:t.payload.message});case f.SAVE_COMMENTS:return Object(z.a)(e,{pending:!0});case f.SAVE_COMMENTS_SUCCESS:return Object(z.a)(e,{pending:!1,entity:[].concat(Object($.a)(e.entity),[t.payload.data])});case f.SAVE_COMMENTS_FAILURE:return Object(z.a)(e,{pending:!1,message:t.payload.message});case f.CLEAR_COMMENTS:return Object(z.a)(e,{pending:!1,entity:[]});default:return e}}}),Y={pending:!1,entity:[],message:""},Z={pending:!1,entity:[],message:""},ee=Object(W.combineReducers)({allPosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.GET_POSTS:return Object(z.a)(e,{pending:!0});case a.GET_POSTS_SUCCESS:return Object(z.a)(e,{pending:!1,entity:t.payload.data});case a.GET_POSTS_FAILURE:return Object(z.a)(e,{pending:!1,message:t.payload.message});case a.SAVE_POST:return Object(z.a)(e,{pending:!0});case a.SAVE_POST_SUCCESS:return Object(z.a)(e,{pending:!1,entity:[].concat(Object($.a)(e.entity),[t.payload.data])});case a.SAVE_POST_FAILURE:return Object(z.a)(e,{pending:!1,message:t.payload.message});case a.DELETE_POST:return Object(z.a)(e,{pending:!0});case a.DELETE_POST_SUCCESS:return Object(z.a)(e,{pending:!1,entity:e.entity.filter(function(e){return e.id!==t.payload.id})});case a.DELETE_POST_FAILURE:return Object(z.a)(e,{pending:!1,message:t.payload.message});case a.CLEAR_POSTS:return Object(z.a)(e,{pending:!1,entity:[]});default:return e}},postComments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L.GET_POST_COMMENTS:return Object(z.a)(e,{pending:!0});case L.GET_POST_COMMENTS_SUCCESS:return Object(z.a)(e,{pending:!1,entity:t.payload.data});case L.GET_POST_COMMENTS_FAILURE:return Object(z.a)(e,{pending:!1,message:t.payload.message});case L.CLEAR_POST_COMMENTS:return Object(z.a)(e,{pending:!1,entity:[]});default:return e}}}),te=function(){return Object(W.combineReducers)({posts:ee,comments:X})};n(44);var ne=Object(W.createStore)(te(),{},Object(B.composeWithDevTools)(Object(W.applyMiddleware)(K.a)));c.a.render(o.a.createElement(_.a,{store:ne},o.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.5b5bdf07.chunk.js.map